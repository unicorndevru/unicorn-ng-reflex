"use strict";angular.module("unicornNgReflex",[]),angular.module("unicornNgReflex").factory("reflexOnEvent",["$timeout",function(e){return function(n,r,t){function i(){if(r){var e=Boolean(c.$eval(f.attr("ng-disabled")));o||e?r.attr("disabled","disabled"):r.removeAttr("disabled")}}function l(){o=!0,i(),t()["finally"](function(){e(function(){o=!1,i()},500,!1)})}function u(){r&&(r.unbind(n,l),a&&a(),r=null)}var o=!1,c=angular.element(r).scope(),f=null,a=null;return f="submit"===n?r.find("button"):r,r.bind(n,l),c.$on("$destroy",u),u}}]),angular.module("unicornNgReflex").directive("reflexSubmit",["$q","reflexOnEvent",function(e,n){return{restrict:"A",require:"^reflex",link:function(r,t,i,l){n("submit",t,function(){return l.onStart(),e.when(r.$eval(i.reflexSubmit)).then(l.onSuccess,l.onError)})}}}]),angular.module("unicornNgReflex").directive("reflex",function(){return{restrict:"EA",controller:["l10n","$rootScope",function(e,n){var r=this;return this.onStart=function(){n.$broadcast("unicornReflexStart"),r.message=""},this.onError=function(e){n.$broadcast("unicornReflexDone"),e&&e.data&&(r.message=e.data.failure)},this.onSuccess=function(){n.$broadcast("unicornReflexDone")},this}]}}),angular.module("unicornNgReflex").directive("reflexMessage",function(){return{restrict:"E",require:"^reflex",template:'\n      <div ng-if="reflexCtrl.message" ng-click="reflexCtrl.message = \'\'" class="panel">\n        <div l10n-t="{{ reflexCtrl.message }}" class="reflex-content"></div>\n      </div>\n    ',scope:{},link:function(e,n,r,t){return e.reflexCtrl=t}}}),angular.module("unicornNgReflex").directive("reflexKeyup",["$q","reflexOnEvent",function(e,n){return{restrict:"A",require:"^reflex",link:function(r,t,i,l){n("keyup",t,function(){return l.onStart(),e.when(r.$eval(i.reflexChange)).then(l.onSuccess,l.onError)})}}}]),angular.module("unicornNgReflex").directive("reflexInit",["$q",function(e){return{restrict:"A",require:"^reflex",link:function(n,r,t,i){return i.onStart(),e.when(n.$eval(t.reflexInit)).then(i.onSuccess,i.onError)}}}]),angular.module("unicornNgReflex").directive("reflexClick",["$q","reflexOnEvent",function(e,n){return{restrict:"A",require:"^reflex",link:function(r,t,i,l){n("click",t,function(){return l.onStart(),e.when(r.$eval(i.reflexClick)).then(l.onSuccess,l.onError)})}}}]),angular.module("unicornNgReflex").directive("reflexBlur",["$q","reflexOnEvent",function(e,n){return{restrict:"A",require:"^reflex",link:function(r,t,i,l){n("blur",t,function(){return l.onStart(),e.when(r.$eval(i.reflexBlur)).then(l.onSuccess,l.onError)})}}}]);